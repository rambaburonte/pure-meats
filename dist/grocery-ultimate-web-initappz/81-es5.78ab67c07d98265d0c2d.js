!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkgrocery_ultimate_web_initappz=self.webpackChunkgrocery_ultimate_web_initappz||[]).push([[81],{38081:function(e,o,i){i.r(o),i.d(o,{StoresModule:function(){return P}});var r=i(38583),c=i(63318),a=i(8239),s=i(16738),d=i(37716),l=i(67241),p=i(5830),g=i(80318),_=function(){return{"border-radius":"5px",height:"120px",width:"100%"}};function m(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",4),d.\u0275\u0275element(1,"ngx-skeleton-loader",5),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("theme",d.\u0275\u0275pureFunction0(1,_)))}function u(t,e){1&t&&d.\u0275\u0275element(0,"img",18)}function f(t,e){1&t&&d.\u0275\u0275element(0,"img",19)}var v=function(t){return{"background-image":t}};function h(t,e){if(1&t){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",6),d.\u0275\u0275elementStart(1,"div",7),d.\u0275\u0275elementStart(2,"div",8),d.\u0275\u0275listener("click",function(){var t=d.\u0275\u0275restoreView(n).$implicit;return d.\u0275\u0275nextContext().openStore(t)}),d.\u0275\u0275template(3,u,1,0,"img",9),d.\u0275\u0275template(4,f,1,0,"img",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",11),d.\u0275\u0275listener("click",function(){var t=d.\u0275\u0275restoreView(n).$implicit;return d.\u0275\u0275nextContext().openStore(t)}),d.\u0275\u0275elementStart(6,"p",12),d.\u0275\u0275text(7),d.\u0275\u0275pipe(8,"slice"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"p",13),d.\u0275\u0275text(10),d.\u0275\u0275pipe(11,"slice"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(12,"p",14),d.\u0275\u0275text(13),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"div",15),d.\u0275\u0275elementStart(15,"div",16),d.\u0275\u0275elementStart(16,"a",17),d.\u0275\u0275text(17),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&t){var o=e.$implicit,i=d.\u0275\u0275nextContext();d.\u0275\u0275advance(2),d.\u0275\u0275property("ngStyle",d.\u0275\u0275pureFunction1(16,v,"url("+i.api.mediaURL+o.cover+"),url(assets/imgs/user.png)")),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",o.isOpen&&"1"===o.isClosed),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!o.isOpen||"0"===o.isClosed),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",o.name.length>12?d.\u0275\u0275pipeBind3(8,8,o.name,0,12)+"..":o.name,""),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",o.address.length>20?d.\u0275\u0275pipeBind3(11,12,o.address,0,20)+"..":o.address," "),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate2(" ",i.getTime(o.open_time)," - ",i.getTime(o.close_time)," "),d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate1(" ",i.util.translate("View")," ")}}var C,O=[{path:"",component:(C=function(){function e(n,o,i){t(this,e),this.util=n,this.api=o,this.router=i,this.stores=[],this.dummystores=[],this.dummystores=Array(30),this.getStore()}return n(e,[{key:"ngOnInit",value:function(){}},{key:"parseResponse",value:function(t){var e,n=this;console.log(t),this.dummystores=[],this.stores=t,this.stores.forEach((e=(0,a.Z)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.isOpen(e.open_time,e.close_time);case 2:e.isOpen=t.sent;case 3:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})),console.log("stores",this.stores)}},{key:"getHomeDataWithCity",value:function(){var t=this;this.api.post_public("v1/home/searchStoreWithCity",{id:localStorage.getItem("city")}).then(function(e){console.log(e),t.stores=[],e&&e.status&&200==e.status&&e.data&&e.data.length?t.parseResponse(e.data):t.stores=[]},function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)}).catch(function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)})}},{key:"getHomeDataWithGeoLocation",value:function(){var t=this,e={lat:localStorage.getItem("userLat"),lng:localStorage.getItem("userLng")};this.api.post_public("v1/home/searchStoreWithGeoLocation",e).then(function(e){console.log(e),t.stores=[],e&&e.status&&200==e.status&&e.data&&e.data.length?t.parseResponse(e.data):t.stores=[]},function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)}).catch(function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)})}},{key:"getHomeDataWithZipCode",value:function(){var t=this;this.api.post_public("v1/home/searchStoreWithZipCode",{zipcode:localStorage.getItem("zipcodes")}).then(function(e){console.log(e),t.stores=[],e&&e.status&&200==e.status&&e.data&&e.data.length?t.parseResponse(e.data):t.stores=[]},function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)}).catch(function(e){t.stores=[],t.dummystores=[],console.log(e),t.util.apiErrorHandler(e)})}},{key:"getStore",value:function(){0==this.util.findType?this.getHomeDataWithCity():1==this.util.findType?this.getHomeDataWithGeoLocation():2==this.util.findType&&this.getHomeDataWithZipCode()}},{key:"isOpen",value:function(t,e){var n="H:mm:ss",o=s().format("HH:mm:ss"),i=s(o,n),r=s(t,n),c=s(e,n);return!!i.isBetween(r,c)}},{key:"openStore",value:function(t){console.log("open store",t);var e=t.name.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase();this.router.navigate(["shop",t.uid,e])}},{key:"getTime",value:function(t){return s(t,["h:mm A"]).format("hh:mm A")}}]),e}(),C.\u0275fac=function(t){return new(t||C)(d.\u0275\u0275directiveInject(l.f),d.\u0275\u0275directiveInject(p.s),d.\u0275\u0275directiveInject(c.F0))},C.\u0275cmp=d.\u0275\u0275defineComponent({type:C,selectors:[["app-stores"]],decls:5,vars:2,consts:[[1,"container"],[1,"row"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["class","content_div col-12 col-md-6",4,"ngFor","ngForOf"],[1,"col-12","col-md-6"],["appearance","circle",3,"theme"],[1,"content_div","col-12","col-md-6"],[1,"card_div"],[1,"image_div",3,"ngStyle","click"],["src","assets/imgs/open.png","class","isOpen","alt","Veg",4,"ngIf"],["src","assets/imgs/close.png","class","isOpen","alt","Non Veg",4,"ngIf"],[1,"desc_div",3,"click"],[1,"pro_name"],[1,"pro_detail"],[1,"price_lbl"],[1,"small_flex"],[1,"btnBtm"],[1,"ion-activatable","ripple-parent"],["src","assets/imgs/open.png","alt","Veg",1,"isOpen"],["src","assets/imgs/close.png","alt","Non Veg",1,"isOpen"]],template:function(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275template(2,m,2,2,"div",2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"div",1),d.\u0275\u0275template(4,h,18,18,"div",3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",e.dummystores),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",e.stores))},directives:[r.NgForOf,g.xr,r.NgStyle,r.NgIf],pipes:[r.SlicePipe],styles:['@charset "UTF-8";.content_div[_ngcontent-%COMP%]{padding:10px 0;width:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:3px 4px 6px rgba(0,0,0,.5);position:relative;border:1px solid lightgray;margin:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .offer_tag[_ngcontent-%COMP%]{width:35px;position:absolute;top:0;left:0;z-index:99}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .off_lbl[_ngcontent-%COMP%]{position:absolute;width:-webkit-min-content;width:-moz-min-content;width:min-content;font-size:9px;top:4px;left:8px;text-align:center;color:#fff;z-index:999}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]{height:80px;width:80px;min-width:80px;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;border-top-left-radius:5px;border-bottom-left-radius:5px;margin:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .kind[_ngcontent-%COMP%]{height:15px;width:15px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .isOpen[_ngcontent-%COMP%]{height:30px;width:30px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]{text-align:right;padding:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_name[_ngcontent-%COMP%]{font-size:15px;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_detail[_ngcontent-%COMP%]{font-size:11px;color:gray;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]{font-family:"semi-bold";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{text-decoration:line-through;font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .sell[_ngcontent-%COMP%]{font-family:"semi-bold"}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .dicount[_ngcontent-%COMP%]{font-family:"semi-bold";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;font-size:12px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]   .ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:5px;color:#fff;background:#fff;border-radius:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]{width:100px;background:var(--ion-color-primary);height:30px;border-radius:15px;display:flex;justify-content:space-between;align-items:center;padding-left:3px;padding-right:3px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff;font-size:14px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{color:#ff8e80;width:25px}']}),C)}],M=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(O)],c.Bz]}),e}(),P=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[r.CommonModule,M,g.hx]]}),e}()}}])}();