"use strict";(self.webpackChunkgrocery_ultimate_web_initappz=self.webpackChunkgrocery_ultimate_web_initappz||[]).push([[81],{38081:function(t,e,n){n.r(e),n.d(e,{StoresModule:function(){return f}});var o=n(38583),i=n(63318),s=n(8239),c=n(16738),r=n(37716),a=n(67241),d=n(5830),l=n(54388);const g=function(){return{"border-radius":"5px",height:"120px",width:"100%"}};function p(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",4),r.\u0275\u0275element(1,"ngx-skeleton-loader",5),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("theme",r.\u0275\u0275pureFunction0(1,g)))}function _(t,e){1&t&&r.\u0275\u0275element(0,"img",18)}function m(t,e){1&t&&r.\u0275\u0275element(0,"img",19)}const h=function(t){return{"background-image":t}};function u(t,e){if(1&t){const t=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275elementStart(1,"div",7),r.\u0275\u0275elementStart(2,"div",8),r.\u0275\u0275listener("click",function(){const e=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext().openStore(e)}),r.\u0275\u0275template(3,_,1,0,"img",9),r.\u0275\u0275template(4,m,1,0,"img",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",11),r.\u0275\u0275listener("click",function(){const e=r.\u0275\u0275restoreView(t).$implicit;return r.\u0275\u0275nextContext().openStore(e)}),r.\u0275\u0275elementStart(6,"p",12),r.\u0275\u0275text(7),r.\u0275\u0275pipe(8,"slice"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"p",13),r.\u0275\u0275text(10),r.\u0275\u0275pipe(11,"slice"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"p",14),r.\u0275\u0275text(13),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",15),r.\u0275\u0275elementStart(15,"div",16),r.\u0275\u0275elementStart(16,"a",17),r.\u0275\u0275text(17),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&t){const t=e.$implicit,n=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(16,h,"url("+n.api.mediaURL+t.cover+"),url(assets/imgs/user.png)")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.isOpen&&"1"===t.isClosed),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.isOpen||"0"===t.isClosed),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",t.name.length>12?r.\u0275\u0275pipeBind3(8,8,t.name,0,12)+"..":t.name,""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",t.address.length>20?r.\u0275\u0275pipeBind3(11,12,t.address,0,20)+"..":t.address," "),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate2(" ",n.getTime(t.open_time)," - ",n.getTime(t.close_time)," "),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",n.util.translate("View")," ")}}const v=[{path:"",component:(()=>{class t{constructor(t,e,n){this.util=t,this.api=e,this.router=n,this.stores=[],this.dummystores=[],this.dummystores=Array(30),this.getStore()}ngOnInit(){}parseResponse(t){var e=this;console.log(t),this.dummystores=[],this.stores=t,this.stores.forEach(function(){var t=(0,s.Z)(function*(t){t.isOpen=yield e.isOpen(t.open_time,t.close_time)});return function(e){return t.apply(this,arguments)}}()),console.log("stores",this.stores)}getHomeDataWithCity(){this.api.post_public("v1/home/searchStoreWithCity",{id:localStorage.getItem("city")}).then(t=>{console.log(t),this.stores=[],t&&t.status&&200==t.status&&t.data&&t.data.length?this.parseResponse(t.data):this.stores=[]},t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)}).catch(t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)})}getHomeDataWithGeoLocation(){const t={lat:localStorage.getItem("userLat"),lng:localStorage.getItem("userLng")};this.api.post_public("v1/home/searchStoreWithGeoLocation",t).then(t=>{console.log(t),this.stores=[],t&&t.status&&200==t.status&&t.data&&t.data.length?this.parseResponse(t.data):this.stores=[]},t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)}).catch(t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)})}getHomeDataWithZipCode(){this.api.post_public("v1/home/searchStoreWithZipCode",{zipcode:localStorage.getItem("zipcodes")}).then(t=>{console.log(t),this.stores=[],t&&t.status&&200==t.status&&t.data&&t.data.length?this.parseResponse(t.data):this.stores=[]},t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)}).catch(t=>{this.stores=[],this.dummystores=[],console.log(t),this.util.apiErrorHandler(t)})}getStore(){0==this.util.findType?this.getHomeDataWithCity():1==this.util.findType?this.getHomeDataWithGeoLocation():2==this.util.findType&&this.getHomeDataWithZipCode()}isOpen(t,e){const n="H:mm:ss",o=c().format("HH:mm:ss"),i=c(o,n),s=c(t,n),r=c(e,n);return!!i.isBetween(s,r)}openStore(t){console.log("open store",t);const e=t.name.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase();this.router.navigate(["shop",t.uid,e])}getTime(t){return c(t,["h:mm A"]).format("hh:mm A")}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(a.f),r.\u0275\u0275directiveInject(d.s),r.\u0275\u0275directiveInject(i.F0))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["app-stores"]],decls:5,vars:2,consts:[[1,"container"],[1,"row"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["class","content_div col-12 col-md-6",4,"ngFor","ngForOf"],[1,"col-12","col-md-6"],["appearance","circle",3,"theme"],[1,"content_div","col-12","col-md-6"],[1,"card_div"],[1,"image_div",3,"ngStyle","click"],["src","assets/imgs/open.png","class","isOpen","alt","Veg",4,"ngIf"],["src","assets/imgs/close.png","class","isOpen","alt","Non Veg",4,"ngIf"],[1,"desc_div",3,"click"],[1,"pro_name"],[1,"pro_detail"],[1,"price_lbl"],[1,"small_flex"],[1,"btnBtm"],[1,"ion-activatable","ripple-parent"],["src","assets/imgs/open.png","alt","Veg",1,"isOpen"],["src","assets/imgs/close.png","alt","Non Veg",1,"isOpen"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275template(2,p,2,2,"div",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",1),r.\u0275\u0275template(4,u,18,18,"div",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.dummystores),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.stores))},directives:[o.NgForOf,l.xr,o.NgStyle,o.NgIf],pipes:[o.SlicePipe],styles:['@charset "UTF-8";.content_div[_ngcontent-%COMP%]{padding:10px 0;width:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:3px 4px 6px rgba(0,0,0,.5);position:relative;border:1px solid lightgray;margin:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .offer_tag[_ngcontent-%COMP%]{width:35px;position:absolute;top:0;left:0;z-index:99}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .off_lbl[_ngcontent-%COMP%]{position:absolute;width:-webkit-min-content;width:-moz-min-content;width:min-content;font-size:9px;top:4px;left:8px;text-align:center;color:#fff;z-index:999}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]{height:80px;width:80px;min-width:80px;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;border-top-left-radius:5px;border-bottom-left-radius:5px;margin:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .kind[_ngcontent-%COMP%]{height:15px;width:15px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .isOpen[_ngcontent-%COMP%]{height:30px;width:30px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]{text-align:right;padding:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_name[_ngcontent-%COMP%]{font-size:15px;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_detail[_ngcontent-%COMP%]{font-size:11px;color:gray;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]{font-family:"semi-bold";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{text-decoration:line-through;font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .sell[_ngcontent-%COMP%]{font-family:"semi-bold"}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .dicount[_ngcontent-%COMP%]{font-family:"semi-bold";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;font-size:12px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]   .ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:5px;color:#fff;background:#fff;border-radius:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]{width:100px;background:var(--ion-color-primary);height:30px;border-radius:15px;display:flex;justify-content:space-between;align-items:center;padding-left:3px;padding-right:3px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff;font-size:14px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{color:#ff8e80;width:25px}']}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[[i.Bz.forChild(v)],i.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[[o.CommonModule,C,l.hx]]}),t})()}}]);