"use strict";(self.webpackChunkgrocery_ultimate_web_initappz=self.webpackChunkgrocery_ultimate_web_initappz||[]).push([[688],{42688:function(e,t,n){n.r(t),n.d(t,{AwaitPaymentsModule:function(){return _}});var r=n(38583),a=n(63318),i=n(8239),o=n(37716),s=n(5830),l=n(67241),c=n(1078);const d=["redeemModal"];function m(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.util.translate("Waiting for payment confirmations"))}}function f(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.util.translate("Payment Confirmed"))}}function u(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",22),o.\u0275\u0275elementStart(1,"div",23),o.\u0275\u0275elementStart(2,"span",24),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.util.translate("Loading..."))}}function p(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",25),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(1,"svg",26),o.\u0275\u0275element(2,"circle",27),o.\u0275\u0275element(3,"path",28),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}function h(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",18),o.\u0275\u0275template(1,m,2,1,"p",19),o.\u0275\u0275template(2,f,2,1,"p",19),o.\u0275\u0275template(3,u,4,1,"div",20),o.\u0275\u0275template(4,p,4,0,"div",21),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!1===e.confirmed),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!0===e.confirmed),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!1===e.confirmed),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!0===e.confirmed)}}function g(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",18),o.\u0275\u0275elementStart(1,"button",29),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().openBrowser()}),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",e.util.translate("Pay Now")," ")}}const k=function(){return{backdrop:!1,ignoreBackdropClick:!0}},v=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a){this.route=e,this.api=t,this.util=n,this.zone=r,this.router=a,this.confirmed=!1,this.payClick=!1,this.util.changeIntevert().subscribe(()=>{clearInterval(this.interval)}),this.route.queryParams.subscribe(e=>{console.log(e),e&&e.id&&e.payLink&&(this.orderId=e.id,this.payLink=e.payLink,this.interval=setInterval(()=>{console.log("calling"),!1===this.confirmed&&this.getOrderStatus()},5e3))})}openBrowser(){var e=this;return(0,i.Z)(function*(){e.payClick=!0,yield window.open(e.payLink,"_blank")})()}ngOnInit(){}getOrderStatus(){this.api.post_private("v1/orders/getById",{id:this.orderId}).then(e=>{console.log(e),e&&e.status&&200===e.status&&e&&e.data&&1===e.data.payStatus&&(this.confirmed=!0,setTimeout(()=>{const e=(this.util.userInfo.first_name+"-"+this.util.userInfo.last_name).toLowerCase();this.router.navigate(["user",e,"order"]),clearInterval(this.interval),this.openSuccess(this.orderId)},5e3))}).catch(e=>{console.log(e),this.router.navigate([""]),this.util.errorMessage(this.util.translate("Something went wrong while payments. please contact administrator"))})}openSuccess(e){var t=this;return(0,i.Z)(function*(){t.redeemModal.show()})()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(a.gz),o.\u0275\u0275directiveInject(s.s),o.\u0275\u0275directiveInject(l.f),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(a.F0))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-await-payments"]],viewQuery:function(e,t){if(1&e&&o.\u0275\u0275viewQuery(d,5),2&e){let e;o.\u0275\u0275queryRefresh(e=o.\u0275\u0275loadQuery())&&(t.redeemModal=e.first)}},decls:30,vars:10,consts:[["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","right","modal-scrolling",3,"config"],["redeemModal","mdbModal"],["role","document",1,"modal-dialog","modal-side","modal-bottom-right","modal-notify","modal-danger"],[1,"modal-content"],[1,"modal-header"],[1,"heading"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"white-text"],[1,"modal-body"],[1,"row"],[1,"col-3"],[1,"text-center"],[1,"fas","fa-gift","fa-4x"],[1,"col-9"],[1,"modal-footer","flex-center"],["type","button","mdbBtn","","color","danger","mdbWavesEffect","","data-dismiss","modal",1,"waves-effect",3,"click"],[1,"container"],["class","center_item",4,"ngIf"],[1,"center_item"],[4,"ngIf"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","success-animation",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["role","status",1,"spinner-border","text-success"],[1,"sr-only"],[1,"success-animation"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],["type","button","mdbBtn","","color","success","mdbWavesEffect","",3,"click"]],template:function(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0,1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275elementStart(5,"p",5),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275reference(1).hide()}),o.\u0275\u0275elementStart(8,"span",7),o.\u0275\u0275text(9,"\xd7"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",8),o.\u0275\u0275elementStart(11,"div",9),o.\u0275\u0275elementStart(12,"div",10),o.\u0275\u0275element(13,"p"),o.\u0275\u0275elementStart(14,"p",11),o.\u0275\u0275element(15,"i",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",13),o.\u0275\u0275elementStart(17,"p"),o.\u0275\u0275text(18),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"p"),o.\u0275\u0275text(20),o.\u0275\u0275elementStart(21,"span"),o.\u0275\u0275text(22),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(23),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(24,"div",14),o.\u0275\u0275elementStart(25,"a",15),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275reference(1).hide()}),o.\u0275\u0275text(26),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(27,"div",16),o.\u0275\u0275template(28,h,5,4,"div",17),o.\u0275\u0275template(29,g,3,1,"div",17),o.\u0275\u0275elementEnd()}2&e&&(o.\u0275\u0275property("config",o.\u0275\u0275pureFunction0(9,k)),o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate1("",t.util.translate("Congratulations")," "),o.\u0275\u0275advance(12),o.\u0275\u0275textInterpolate1(" ",t.util.translate("Your Order Created Sucessfully")," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.util.translate("You can view the order tracking info in the")," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("' ",t.util.translate("Profile")," '"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.util.translate("section")," . "),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1("",t.util.translate("Ok, thanks")," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!0===t.payClick),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!1===t.payClick))},directives:[c.oB,c.mT,c.b6,r.NgIf],styles:['@charset "UTF-8";.center_item[_ngcontent-%COMP%]{padding:100px;text-align:center}.center_item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-family:"semi-bold"}.center_item[_ngcontent-%COMP%]   .success-animation[_ngcontent-%COMP%]{margin:150px auto}.center_item[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:block;stroke-width:2;stroke:#4bb71b;stroke-miterlimit:10;box-shadow:inset 0 0 #4bb71b;-webkit-animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;position:relative;top:5px;right:5px;margin:0 auto}.center_item[_ngcontent-%COMP%]   .checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#4bb71b;fill:#fff;-webkit-animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.center_item[_ngcontent-%COMP%]   .checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;-webkit-animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@-webkit-keyframes stroke{to{stroke-dashoffset:0}}@keyframes stroke{to{stroke-dashoffset:0}}@-webkit-keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@-webkit-keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}']}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[a.Bz.forChild(v)],a.Bz]}),e})();var y=n(10712),x=n(37857),w=n(90665),I=n(54388);let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[r.CommonModule,b,c.yi.forRoot(),y.vj,x.IJ,w.u5,I.hx]]}),e})()}}]);