{"ast":null,"code":"import _asyncToGenerator from \"/Volumes/Drive/documents/projects/puremeats/App_code/User-Web-Version/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/util.service\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ngx-skeleton-loader\";\n\nconst _c0 = function () {\n  return {\n    \"border-radius\": \"5px\",\n    height: \"120px\",\n    width: \"100%\"\n  };\n};\n\nfunction StoresComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"ngx-skeleton-loader\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"theme\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction StoresComponent_div_4_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 18);\n  }\n}\n\nfunction StoresComponent_div_4_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 19);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"background-image\": a0\n  };\n};\n\nfunction StoresComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵlistener(\"click\", function StoresComponent_div_4_Template_div_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.openStore(item_r3);\n    });\n    i0.ɵɵtemplate(3, StoresComponent_div_4_img_3_Template, 1, 0, \"img\", 9);\n    i0.ɵɵtemplate(4, StoresComponent_div_4_img_4_Template, 1, 0, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 11);\n    i0.ɵɵlistener(\"click\", function StoresComponent_div_4_Template_div_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.openStore(item_r3);\n    });\n    i0.ɵɵelementStart(6, \"p\", 12);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 13);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 14);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 15);\n    i0.ɵɵelementStart(15, \"div\", 16);\n    i0.ɵɵelementStart(16, \"a\", 17);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(16, _c1, \"url(\" + ctx_r1.api.mediaURL + item_r3.cover + \"),url(assets/imgs/user.png)\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r3.isOpen && item_r3.isClosed === \"1\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !item_r3.isOpen || item_r3.isClosed === \"0\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r3.name.length > 12 ? i0.ɵɵpipeBind3(8, 8, item_r3.name, 0, 12) + \"..\" : item_r3.name, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r3.address.length > 20 ? i0.ɵɵpipeBind3(11, 12, item_r3.address, 0, 20) + \"..\" : item_r3.address, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.getTime(item_r3.open_time), \" - \", ctx_r1.getTime(item_r3.close_time), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.util.translate(\"View\"), \" \");\n  }\n}\n\nexport let StoresComponent = /*#__PURE__*/(() => {\n  class StoresComponent {\n    constructor(util, api, router) {\n      this.util = util;\n      this.api = api;\n      this.router = router;\n      this.stores = [];\n      this.dummystores = [];\n      this.dummystores = Array(30);\n      this.getStore();\n    }\n\n    ngOnInit() {}\n\n    parseResponse(data) {\n      var _this = this;\n\n      console.log(data);\n      this.dummystores = [];\n      this.stores = data;\n      this.stores.forEach( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (element) {\n          element['isOpen'] = yield _this.isOpen(element.open_time, element.close_time);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      console.log('stores', this.stores);\n    }\n\n    getHomeDataWithCity() {\n      this.api.post_public('v1/home/searchStoreWithCity', {\n        id: localStorage.getItem('city')\n      }).then(data => {\n        console.log(data);\n        this.stores = [];\n\n        if (data && data.status && data.status == 200 && data.data && data.data.length) {\n          this.parseResponse(data.data);\n        } else {\n          this.stores = [];\n        }\n      }, error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      }).catch(error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      });\n    }\n\n    getHomeDataWithGeoLocation() {\n      const param = {\n        lat: localStorage.getItem('userLat'),\n        lng: localStorage.getItem('userLng')\n      };\n      this.api.post_public('v1/home/searchStoreWithGeoLocation', param).then(data => {\n        console.log(data);\n        this.stores = [];\n\n        if (data && data.status && data.status == 200 && data.data && data.data.length) {\n          this.parseResponse(data.data);\n        } else {\n          this.stores = [];\n        }\n      }, error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      }).catch(error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      });\n    }\n\n    getHomeDataWithZipCode() {\n      this.api.post_public('v1/home/searchStoreWithZipCode', {\n        zipcode: localStorage.getItem('zipcodes')\n      }).then(data => {\n        console.log(data);\n        this.stores = [];\n\n        if (data && data.status && data.status == 200 && data.data && data.data.length) {\n          this.parseResponse(data.data);\n        } else {\n          this.stores = [];\n        }\n      }, error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      }).catch(error => {\n        this.stores = [];\n        this.dummystores = [];\n        console.log(error);\n        this.util.apiErrorHandler(error);\n      });\n    }\n\n    getStore() {\n      if (this.util.findType == 0) {\n        this.getHomeDataWithCity();\n      } else if (this.util.findType == 1) {\n        this.getHomeDataWithGeoLocation();\n      } else if (this.util.findType == 2) {\n        this.getHomeDataWithZipCode();\n      } // const param = {\n      //   id: localStorage.getItem('city')\n      // };\n      // this.api.post('stores/getByCity', param).then((stores: any) => {\n      //   console.log('stores by city', stores);\n      //   this.stores = [];\n      //   this.dummystores = [];\n      //   if (stores && stores.status === 200 && stores.data && stores.data.length) {\n      //     console.log('store====>>>', this.stores);\n      //   }\n      // }, error => {\n      //   this.dummystores = [];\n      //   console.log(error);\n      //   this.util.toast('error', this.util.translate('Error'), this.util.translate('Something went wrong'));\n      // });\n\n    }\n\n    isOpen(start, end) {\n      const format = 'H:mm:ss';\n      const ctime = moment().format('HH:mm:ss');\n      const time = moment(ctime, format);\n      const beforeTime = moment(start, format);\n      const afterTime = moment(end, format);\n\n      if (time.isBetween(beforeTime, afterTime)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    openStore(item) {\n      console.log('open store', item);\n      const name = item.name.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase();\n      this.router.navigate(['shop', item.uid, name]);\n    }\n\n    getTime(time) {\n      return moment(time, ['h:mm A']).format('hh:mm A');\n    }\n\n  }\n\n  StoresComponent.ɵfac = function StoresComponent_Factory(t) {\n    return new (t || StoresComponent)(i0.ɵɵdirectiveInject(i1.UtilService), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  StoresComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StoresComponent,\n    selectors: [[\"app-stores\"]],\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"container\"], [1, \"row\"], [\"class\", \"col-12 col-md-6\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"content_div col-12 col-md-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-12\", \"col-md-6\"], [\"appearance\", \"circle\", 3, \"theme\"], [1, \"content_div\", \"col-12\", \"col-md-6\"], [1, \"card_div\"], [1, \"image_div\", 3, \"ngStyle\", \"click\"], [\"src\", \"assets/imgs/open.png\", \"class\", \"isOpen\", \"alt\", \"Veg\", 4, \"ngIf\"], [\"src\", \"assets/imgs/close.png\", \"class\", \"isOpen\", \"alt\", \"Non Veg\", 4, \"ngIf\"], [1, \"desc_div\", 3, \"click\"], [1, \"pro_name\"], [1, \"pro_detail\"], [1, \"price_lbl\"], [1, \"small_flex\"], [1, \"btnBtm\"], [1, \"ion-activatable\", \"ripple-parent\"], [\"src\", \"assets/imgs/open.png\", \"alt\", \"Veg\", 1, \"isOpen\"], [\"src\", \"assets/imgs/close.png\", \"alt\", \"Non Veg\", 1, \"isOpen\"]],\n    template: function StoresComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, StoresComponent_div_2_Template, 2, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵtemplate(4, StoresComponent_div_4_Template, 18, 18, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.dummystores);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.stores);\n      }\n    },\n    directives: [i4.NgForOf, i5.NgxSkeletonLoaderComponent, i4.NgStyle, i4.NgIf],\n    pipes: [i4.SlicePipe],\n    styles: [\"@charset \\\"UTF-8\\\";.content_div[_ngcontent-%COMP%]{padding:10px 0;width:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:3px 4px 6px rgba(0,0,0,.5);position:relative;border:1px solid lightgray;margin:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .offer_tag[_ngcontent-%COMP%]{width:35px;position:absolute;top:0;left:0;z-index:99}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .off_lbl[_ngcontent-%COMP%]{position:absolute;width:-webkit-min-content;width:-moz-min-content;width:min-content;font-size:9px;top:4px;left:8px;text-align:center;color:#fff;z-index:999}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]{height:80px;width:80px;min-width:80px;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;border-top-left-radius:5px;border-bottom-left-radius:5px;margin:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .kind[_ngcontent-%COMP%]{height:15px;width:15px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   .isOpen[_ngcontent-%COMP%]{height:30px;width:30px;position:absolute;right:5px;top:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]{text-align:right;padding:10px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_name[_ngcontent-%COMP%]{font-size:15px;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .pro_detail[_ngcontent-%COMP%]{font-size:11px;color:gray;margin-bottom:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]{font-family:\\\"semi-bold\\\";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{text-decoration:line-through;font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .sell[_ngcontent-%COMP%]{font-family:\\\"semi-bold\\\"}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .price_lbl[_ngcontent-%COMP%]   .dicount[_ngcontent-%COMP%]{font-family:\\\"semi-bold\\\";font-size:11px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;font-size:12px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .small_flex[_ngcontent-%COMP%]   .btnBtm[_ngcontent-%COMP%]   .ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden;padding:5px;color:#fff;background:#fff;border-radius:5px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]{width:100px;background:var(--ion-color-primary);height:30px;border-radius:15px;display:flex;justify-content:space-between;align-items:center;padding-left:3px;padding-right:3px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff;font-size:14px}.content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .desc_div[_ngcontent-%COMP%]   .abs_add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{color:#ff8e80;width:25px}\"]\n  });\n  return StoresComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}