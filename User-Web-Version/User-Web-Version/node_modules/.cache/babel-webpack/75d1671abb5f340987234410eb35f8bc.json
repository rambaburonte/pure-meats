{"ast":null,"code":"import _asyncToGenerator from \"/Applications/XAMPP/xamppfiles/htdocs/croppers-new/App_code/User-Web-Version/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/api.service\";\nimport * as i3 from \"src/app/services/util.service\";\nimport * as i4 from \"angular-bootstrap-md\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"redeemModal\"];\n\nfunction AwaitPaymentsComponent_div_28_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.util.translate(\"Waiting for payment confirmations\"));\n  }\n}\n\nfunction AwaitPaymentsComponent_div_28_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.util.translate(\"Payment Confirmed\"));\n  }\n}\n\nfunction AwaitPaymentsComponent_div_28_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵelementStart(2, \"span\", 24);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.util.translate(\"Loading...\"));\n  }\n}\n\nfunction AwaitPaymentsComponent_div_28_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 26);\n    i0.ɵɵelement(2, \"circle\", 27);\n    i0.ɵɵelement(3, \"path\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AwaitPaymentsComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, AwaitPaymentsComponent_div_28_p_1_Template, 2, 1, \"p\", 19);\n    i0.ɵɵtemplate(2, AwaitPaymentsComponent_div_28_p_2_Template, 2, 1, \"p\", 19);\n    i0.ɵɵtemplate(3, AwaitPaymentsComponent_div_28_div_3_Template, 4, 1, \"div\", 20);\n    i0.ɵɵtemplate(4, AwaitPaymentsComponent_div_28_div_4_Template, 4, 0, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.confirmed === false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.confirmed === true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.confirmed === false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.confirmed === true);\n  }\n}\n\nfunction AwaitPaymentsComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AwaitPaymentsComponent_div_29_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.openBrowser();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.util.translate(\"Pay Now\"), \" \");\n  }\n}\n\nconst _c1 = function () {\n  return {\n    backdrop: false,\n    ignoreBackdropClick: true\n  };\n};\n\nexport let AwaitPaymentsComponent = /*#__PURE__*/(() => {\n  class AwaitPaymentsComponent {\n    constructor(route, api, util, zone, router) {\n      this.route = route;\n      this.api = api;\n      this.util = util;\n      this.zone = zone;\n      this.router = router;\n      this.confirmed = false;\n      this.payClick = false;\n      this.util.changeIntevert().subscribe(() => {\n        clearInterval(this.interval);\n      });\n      this.route.queryParams.subscribe(data => {\n        console.log(data);\n\n        if (data && data.id && data.payLink) {\n          this.orderId = data.id;\n          this.payLink = data.payLink;\n          this.interval = setInterval(() => {\n            console.log('calling');\n\n            if (this.confirmed === false) {\n              this.getOrderStatus();\n            }\n          }, 5000);\n        }\n      });\n    }\n\n    openBrowser() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.payClick = true;\n        yield window.open(_this.payLink, '_blank');\n      })();\n    }\n\n    ngOnInit() {}\n\n    getOrderStatus() {\n      const param = {\n        id: this.orderId\n      };\n      this.api.post_private('v1/orders/getById', param).then(data => {\n        console.log(data);\n\n        if (data && data.status && data.status === 200) {\n          if (data && data.data && data.data.payStatus === 1) {\n            this.confirmed = true;\n            setTimeout(() => {\n              const name = (this.util.userInfo.first_name + '-' + this.util.userInfo.last_name).toLowerCase();\n              this.router.navigate(['user', name, 'order']);\n              clearInterval(this.interval);\n              this.openSuccess(this.orderId);\n            }, 5000);\n          }\n        }\n      }).catch(error => {\n        console.log(error);\n        this.router.navigate(['']);\n        this.util.errorMessage(this.util.translate('Something went wrong while payments. please contact administrator'));\n      });\n    }\n\n    openSuccess(orderID) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2.redeemModal.show();\n      })();\n    }\n\n  }\n\n  AwaitPaymentsComponent.ɵfac = function AwaitPaymentsComponent_Factory(t) {\n    return new (t || AwaitPaymentsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.UtilService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  AwaitPaymentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AwaitPaymentsComponent,\n    selectors: [[\"app-await-payments\"]],\n    viewQuery: function AwaitPaymentsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.redeemModal = _t.first);\n      }\n    },\n    decls: 30,\n    vars: 10,\n    consts: [[\"mdbModal\", \"\", \"id\", \"frameModalTop\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"myModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\", \"right\", \"modal-scrolling\", 3, \"config\"], [\"redeemModal\", \"mdbModal\"], [\"role\", \"document\", 1, \"modal-dialog\", \"modal-side\", \"modal-bottom-right\", \"modal-notify\", \"modal-danger\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"heading\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"white-text\"], [1, \"modal-body\"], [1, \"row\"], [1, \"col-3\"], [1, \"text-center\"], [1, \"fas\", \"fa-gift\", \"fa-4x\"], [1, \"col-9\"], [1, \"modal-footer\", \"flex-center\"], [\"type\", \"button\", \"mdbBtn\", \"\", \"color\", \"danger\", \"mdbWavesEffect\", \"\", \"data-dismiss\", \"modal\", 1, \"waves-effect\", 3, \"click\"], [1, \"container\"], [\"class\", \"center_item\", 4, \"ngIf\"], [1, \"center_item\"], [4, \"ngIf\"], [\"style\", \"display: flex;flex-direction: column;justify-content: center;align-items: center;\", 4, \"ngIf\"], [\"class\", \"success-animation\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"center\", \"align-items\", \"center\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-success\"], [1, \"sr-only\"], [1, \"success-animation\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 52 52\", 1, \"checkmark\"], [\"cx\", \"26\", \"cy\", \"26\", \"r\", \"25\", \"fill\", \"none\", 1, \"checkmark__circle\"], [\"fill\", \"none\", \"d\", \"M14.1 27.2l7.1 7.2 16.7-16.8\", 1, \"checkmark__check\"], [\"type\", \"button\", \"mdbBtn\", \"\", \"color\", \"success\", \"mdbWavesEffect\", \"\", 3, \"click\"]],\n    template: function AwaitPaymentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r9 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0, 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"p\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function AwaitPaymentsComponent_Template_button_click_7_listener() {\n          i0.ɵɵrestoreView(_r9);\n\n          const _r0 = i0.ɵɵreference(1);\n\n          return _r0.hide();\n        });\n        i0.ɵɵelementStart(8, \"span\", 7);\n        i0.ɵɵtext(9, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵelement(13, \"p\");\n        i0.ɵɵelementStart(14, \"p\", 11);\n        i0.ɵɵelement(15, \"i\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 13);\n        i0.ɵɵelementStart(17, \"p\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\");\n        i0.ɵɵtext(20);\n        i0.ɵɵelementStart(21, \"span\");\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 14);\n        i0.ɵɵelementStart(25, \"a\", 15);\n        i0.ɵɵlistener(\"click\", function AwaitPaymentsComponent_Template_a_click_25_listener() {\n          i0.ɵɵrestoreView(_r9);\n\n          const _r0 = i0.ɵɵreference(1);\n\n          return _r0.hide();\n        });\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 16);\n        i0.ɵɵtemplate(28, AwaitPaymentsComponent_div_28_Template, 5, 4, \"div\", 17);\n        i0.ɵɵtemplate(29, AwaitPaymentsComponent_div_29_Template, 3, 1, \"div\", 17);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"config\", i0.ɵɵpureFunction0(9, _c1));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"\", ctx.util.translate(\"Congratulations\"), \" \");\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\" \", ctx.util.translate(\"Your Order Created Sucessfully\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.util.translate(\"You can view the order tracking info in the\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"' \", ctx.util.translate(\"Profile\"), \" '\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.util.translate(\"section\"), \" . \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.util.translate(\"Ok, thanks\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.payClick === true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.payClick === false);\n      }\n    },\n    directives: [i4.ModalDirective, i4.MdbBtnDirective, i4.WavesDirective, i5.NgIf],\n    styles: [\"@charset \\\"UTF-8\\\";.center_item[_ngcontent-%COMP%]{padding:100px;text-align:center}.center_item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-family:\\\"semi-bold\\\"}.center_item[_ngcontent-%COMP%]   .success-animation[_ngcontent-%COMP%]{margin:150px auto}.center_item[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:block;stroke-width:2;stroke:#4bb71b;stroke-miterlimit:10;box-shadow:inset 0 0 #4bb71b;-webkit-animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;position:relative;top:5px;right:5px;margin:0 auto}.center_item[_ngcontent-%COMP%]   .checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#4bb71b;fill:#fff;-webkit-animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.center_item[_ngcontent-%COMP%]   .checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;-webkit-animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@-webkit-keyframes stroke{to{stroke-dashoffset:0}}@keyframes stroke{to{stroke-dashoffset:0}}@-webkit-keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@-webkit-keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}\"]\n  });\n  return AwaitPaymentsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}