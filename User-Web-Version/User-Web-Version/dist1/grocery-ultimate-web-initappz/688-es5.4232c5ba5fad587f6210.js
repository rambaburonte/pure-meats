!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkgrocery_ultimate_web_initappz=self.webpackChunkgrocery_ultimate_web_initappz||[]).push([[688],{42688:function(t,r,a){a.r(r),a.d(r,{AwaitPaymentsModule:function(){return E}});var i=a(38583),o=a(63318),l=a(8239),c=a(37716),s=a(5830),d=a(67241),m=a(1078),f=["redeemModal"];function u(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.util.translate("Waiting for payment confirmations"))}}function p(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.util.translate("Payment Confirmed"))}}function v(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",22),c.\u0275\u0275elementStart(1,"div",23),c.\u0275\u0275elementStart(2,"span",24),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(n.util.translate("Loading..."))}}function g(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",25),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(1,"svg",26),c.\u0275\u0275element(2,"circle",27),c.\u0275\u0275element(3,"path",28),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd())}function k(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",18),c.\u0275\u0275template(1,u,2,1,"p",19),c.\u0275\u0275template(2,p,2,1,"p",19),c.\u0275\u0275template(3,v,4,1,"div",20),c.\u0275\u0275template(4,g,4,0,"div",21),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!1===n.confirmed),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!0===n.confirmed),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!1===n.confirmed),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!0===n.confirmed)}}function h(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",18),c.\u0275\u0275elementStart(1,"button",29),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().openBrowser()}),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var r=c.\u0275\u0275nextContext();c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1(" ",r.util.translate("Pay Now")," ")}}var b,y=function(){return{backdrop:!1,ignoreBackdropClick:!0}},x=[{path:"",component:(b=function(){function t(n,r,a,i,o){var l=this;e(this,t),this.route=n,this.api=r,this.util=a,this.zone=i,this.router=o,this.confirmed=!1,this.payClick=!1,this.util.changeIntevert().subscribe(function(){clearInterval(l.interval)}),this.route.queryParams.subscribe(function(e){console.log(e),e&&e.id&&e.payLink&&(l.orderId=e.id,l.payLink=e.payLink,l.interval=setInterval(function(){console.log("calling"),!1===l.confirmed&&l.getOrderStatus()},5e3))})}return n(t,[{key:"openBrowser",value:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.payClick=!0,t.next=3,window.open(e.payLink,"_blank");case 3:case"end":return t.stop()}},t)}))()}},{key:"ngOnInit",value:function(){}},{key:"getOrderStatus",value:function(){var e=this;this.api.post_private("v1/orders/getById",{id:this.orderId}).then(function(t){console.log(t),t&&t.status&&200===t.status&&t&&t.data&&1===t.data.payStatus&&(e.confirmed=!0,setTimeout(function(){var t=(e.util.userInfo.first_name+"-"+e.util.userInfo.last_name).toLowerCase();e.router.navigate(["user",t,"order"]),clearInterval(e.interval),e.openSuccess(e.orderId)},5e3))}).catch(function(t){console.log(t),e.router.navigate([""]),e.util.errorMessage(e.util.translate("Something went wrong while payments. please contact administrator"))})}},{key:"openSuccess",value:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.redeemModal.show();case 1:case"end":return e.stop()}},e)}))()}}]),t}(),b.\u0275fac=function(e){return new(e||b)(c.\u0275\u0275directiveInject(o.gz),c.\u0275\u0275directiveInject(s.s),c.\u0275\u0275directiveInject(d.f),c.\u0275\u0275directiveInject(c.NgZone),c.\u0275\u0275directiveInject(o.F0))},b.\u0275cmp=c.\u0275\u0275defineComponent({type:b,selectors:[["app-await-payments"]],viewQuery:function(e,t){var n;1&e&&c.\u0275\u0275viewQuery(f,5),2&e&&c.\u0275\u0275queryRefresh(n=c.\u0275\u0275loadQuery())&&(t.redeemModal=n.first)},decls:30,vars:10,consts:[["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","right","modal-scrolling",3,"config"],["redeemModal","mdbModal"],["role","document",1,"modal-dialog","modal-side","modal-bottom-right","modal-notify","modal-danger"],[1,"modal-content"],[1,"modal-header"],[1,"heading"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"white-text"],[1,"modal-body"],[1,"row"],[1,"col-3"],[1,"text-center"],[1,"fas","fa-gift","fa-4x"],[1,"col-9"],[1,"modal-footer","flex-center"],["type","button","mdbBtn","","color","danger","mdbWavesEffect","","data-dismiss","modal",1,"waves-effect",3,"click"],[1,"container"],["class","center_item",4,"ngIf"],[1,"center_item"],[4,"ngIf"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","success-animation",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["role","status",1,"spinner-border","text-success"],[1,"sr-only"],[1,"success-animation"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 52 52",1,"checkmark"],["cx","26","cy","26","r","25","fill","none",1,"checkmark__circle"],["fill","none","d","M14.1 27.2l7.1 7.2 16.7-16.8",1,"checkmark__check"],["type","button","mdbBtn","","color","success","mdbWavesEffect","",3,"click"]],template:function(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",0,1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275elementStart(3,"div",3),c.\u0275\u0275elementStart(4,"div",4),c.\u0275\u0275elementStart(5,"p",5),c.\u0275\u0275text(6),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"button",6),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275reference(1).hide()}),c.\u0275\u0275elementStart(8,"span",7),c.\u0275\u0275text(9,"\xd7"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"div",8),c.\u0275\u0275elementStart(11,"div",9),c.\u0275\u0275elementStart(12,"div",10),c.\u0275\u0275element(13,"p"),c.\u0275\u0275elementStart(14,"p",11),c.\u0275\u0275element(15,"i",12),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(16,"div",13),c.\u0275\u0275elementStart(17,"p"),c.\u0275\u0275text(18),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(19,"p"),c.\u0275\u0275text(20),c.\u0275\u0275elementStart(21,"span"),c.\u0275\u0275text(22),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(23),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(24,"div",14),c.\u0275\u0275elementStart(25,"a",15),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275reference(1).hide()}),c.\u0275\u0275text(26),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(27,"div",16),c.\u0275\u0275template(28,k,5,4,"div",17),c.\u0275\u0275template(29,h,3,1,"div",17),c.\u0275\u0275elementEnd()}2&e&&(c.\u0275\u0275property("config",c.\u0275\u0275pureFunction0(9,y)),c.\u0275\u0275advance(6),c.\u0275\u0275textInterpolate1("",t.util.translate("Congratulations")," "),c.\u0275\u0275advance(12),c.\u0275\u0275textInterpolate1(" ",t.util.translate("Your Order Created Sucessfully")," "),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1(" ",t.util.translate("You can view the order tracking info in the")," "),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("' ",t.util.translate("Profile")," '"),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",t.util.translate("section")," . "),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1("",t.util.translate("Ok, thanks")," "),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!0===t.payClick),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!1===t.payClick))},directives:[m.oB,m.mT,m.b6,i.NgIf],styles:['@charset "UTF-8";.center_item[_ngcontent-%COMP%]{padding:100px;text-align:center}.center_item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-family:"semi-bold"}.center_item[_ngcontent-%COMP%]   .success-animation[_ngcontent-%COMP%]{margin:150px auto}.center_item[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;display:block;stroke-width:2;stroke:#4bb71b;stroke-miterlimit:10;box-shadow:inset 0 0 #4bb71b;-webkit-animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both;position:relative;top:5px;right:5px;margin:0 auto}.center_item[_ngcontent-%COMP%]   .checkmark__circle[_ngcontent-%COMP%]{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:#4bb71b;fill:#fff;-webkit-animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.center_item[_ngcontent-%COMP%]   .checkmark__check[_ngcontent-%COMP%]{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;-webkit-animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@-webkit-keyframes stroke{to{stroke-dashoffset:0}}@keyframes stroke{to{stroke-dashoffset:0}}@-webkit-keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@keyframes scale{0%,to{transform:none}50%{transform:scale(1.1)}}@-webkit-keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}@keyframes fill{to{box-shadow:inset 0 0 0 30px #4bb71b}}']}),b)}],w=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({imports:[[o.Bz.forChild(x)],o.Bz]}),t}(),I=a(10712),_=a(37857),S=a(90665),C=a(52925),E=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({imports:[[i.CommonModule,w,m.yi.forRoot(),I.vj,_.IJ,S.u5,C.hx]]}),t}()}}])}();